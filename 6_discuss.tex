% vim: set tabstop=4 :
%**********************************************************
\chapter{おわりに}
\label{sec:discuss}
%**********************************************************
本研究では，SFMを用いた人流シミュレーションを高速化するために
進行方向計算中の演算回数を削減する手法を提案し，その有効性を評価した．
提案手法は，目的地や障害物の座標が固定であることから
目的地に向かう力や障害物を避ける力がエージェントの座標に応じて決まる特徴に
着目し，解析領域を格子状に分割した領域ごとに目的地に向かう力と障害物を避ける力を
あらかじめ計算することで，解析中の再計算を削減する．
エージェントを避ける力は，解析中にエージェント間距離が変わるため，解析前に
あらかじめ計算することが不可能である．提案手法では，
周囲のエージェントが影響範囲内かの判定する領域(近似領域)を
エージェントを避ける力の影響範囲に高い精度で近似することで，
エージェントを避ける力の計算時に不要なエージェント間距離の計算回数を削減する．
本論文では，提案手法のシミュレーション実行時間，演算回数の削減率．シミュレーション精度
を用いて評価を行った．
評価の結果，
提案手法は，
格子分割を用いた進行方向計算中の演算回数削減により，
従来のセル分割法に対して，目的地に向かう力と障害物を避ける力の
計算回数を最大49\%削減できることを確認した．
提案手法を用いたシミュレーション実行時間は，格子分割を用いた進行方向計算中の演算回数削減の効果により，
セル分割法よりも1.93倍高速に解析できることを確認した．
%格子分割を用いた進行方向計算中の演算回数削減は，目的地に向かう力と障害物を避ける力をメモリに
%格納するため，解析領域の大きさや格子サイズの小ささに応じてメモリ使用量が多くなる．
%このため，メモリ使用量に制約がある場合には，エージェントが通らない場所などの計算に
%必要のない値を保持しないなどの工夫をする必要がある．
提案手法は，
エージェントが交差するように移動する問題において，
近似領域を影響範囲に高い精度で近似することで，
従来のセル分割法に対して
エージェント間距離の計算回数を最大24\%削減し，
十分に許容な可能な誤差の範囲で最大1.25倍の高速化率が得られることを確認した．
また，提案手法で発生した誤差より大きい誤差を許容することができる場合，
近似領域の影響範囲に対する近似精度を高めることが可能であり，
エージェント間距離の計算回数の削減率を高めることができると期待できる．
このため，精度低下を許容できる問題に対しては，
さらなる高速化が見込めるといえる．


\if 0

\clearpage
提案手法を用いた人流シミュレーションは，従来のセル分割法よりも，解析時間
目的地に向かう力と障害物を避ける力の計算回数の削減効果により，
演算回数を最大○○\%削減できることを確認した．また，押し合い圧し合いを行う群集の行動を再現した
解析で，


評価では，提案手法のシミュレーション実行時間，演算回数の削減率．シミュレーション精度
を用いて評価を行った．
目的地に向かう力と障害物を避ける力の計算回数削減における
演算回数の削減率の評価では，




第\ref{sec:reduce_distance}章「エージェント間距離の計算回数削減手法」では，
視野パラメータを用いたSFMの人流シミュレーションにおいて，周囲のエージェントが
視野範囲内に存在するかの判定に必要なエージェント間距離の計算回数を削減する手法を提案した．
SFMを用いた人流シミュレーションは，一般的にセル分割法を用いることで，
エージェント間距離の計算回数の削減が行われている．
セル分割法は，影響範囲が円形であることを前提としており，視野を用いたSFMのように影響範囲が
扇形の場合を想定していない．
このため，視野を用いたSFMに一般的なSFMのエージェント間距離の計算回数削減手法を用いると，
影響範囲を円形に絞り込みをした上で，視野形状に合わせた扇形に絞り込みを行う操作が必要となる．
本提案手法では，視野形状である扇形に近似した領域を設定し，
近似領域外のエージェントに対するエージェント間距離の計算回数を削減することで，
視野を用いたSFMを高速化する．
評価の結果，提案手法は，エージェントが交差するように移動する問題において，
十分に許容可能な誤差の範囲で約1.25倍の高速化率が得られることを確認した．
%他にもあればここに追記予定


第\ref{sec:reduce_travel_direction}章「格子分割を用いた進行方向の計算回数削減手法」では，
SFMを用いた人流シミュレーションにおいて，
進行方向をあらかじめ計算することで，解析中の進行方向の計算回数を削減する手法を提案した．
本手法は，目的地や障害物の座標が解析中に変化しない特徴を利用し，解析領域を格子状に分割した
領域ごとに目的地に向かうベクトルと障害物を避ける力を計算し，解析中にその値を用いて
解析する
評価の結果，提案手法は，通路を再現した配置を移動する問題において，
エージェントの進行方向の計算回数を最大○○\%削減し，シミュレーション実行時間を
最大○○倍高速に解析できることを確認した．
また，提案手法は，避難シミュレーションにおいても，大学の施設を再現した配置から避難する様子を
再現する解析で十分に許容できる誤差の範囲で最大○○倍高速に解析できることを確認した．

以上の結果より，SFMを用いた人流シミュレーションにおいて，ふたつの手法で計算回数を削減し，
高速化を確認した．第\ref{sec:reduce_distance}章で提案した手法は，視野パラメータを用いた
SFM

\textbf{続く}

\fi
%***** END ************************************************


%------------------------------------------------------------------
% 注意点
%------------------------------------------------------------------
% 「おわりに」は，ここまでの文章をすべて読んできた人向けの文章です．
% このため，細かな用語の説明は必要ありません．
% 論文の論理構造が分かるような文章を1\UTF{FF5E}2ページ目安で書いてください．
% 
% 構成例を以下に示します．
% [1段落目]
% 従来手法の問題点とそれに対する提案手法
% [2段落目]
% 提案手法の手順
% [3]段落目以降
% 評価結果とそこから導き出される結論
%
%------------------------------------------------------------------
